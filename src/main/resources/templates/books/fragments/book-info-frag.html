<html lang="en" xmlns:th="http://www.thymeleaf.org">

<div th:fragment="bookForm">
    <form th:action="${book.id == null} ? @{/books/add} : @{'/books/' + ${book.id}}"
          method="post"
          th:object="${book}">

        <div style="display: flex; align-items: flex-start; gap: 2rem;">

            <!-- Left: Form fields -->
            <div style="flex: 1;">

                <!-- Title -->
                <label>Title:</label>
                <input type="text" th:field="*{title}" th:readonly="${readonlyMode}" required />
                <div class="error" th:if="${#fields.hasErrors('title')}" th:errors="*{title}"></div>

                <!-- Author -->
                <label>Author:</label>
                <input type="text" th:field="*{author}" th:readonly="${readonlyMode}" required />
                <div class="error" th:if="${#fields.hasErrors('author')}" th:errors="*{author}"></div>

                <!-- ISBN -->
                <label>ISBN:</label>
                <input type="text" th:field="*{isbn}" th:readonly="${readonlyMode}" />
                <div class="error" th:if="${#fields.hasErrors('isbn')}" th:errors="*{isbn}"></div>

                <!-- Reading Level -->
                <label>Reading Level:</label>
                <input type="number" step="0.1" min="0" max="12" th:field="*{readingLevel}" th:readonly="${readonlyMode}" />
                <div class="error" th:if="${#fields.hasErrors('readingLevel')}" th:errors="*{readingLevel}"></div>

                <!-- Description -->
                <label>Description:</label><br>
                <textarea th:field="*{description}" th:readonly="${readonlyMode}" rows="6" cols="50"></textarea>
                <div class="error" th:if="${#fields.hasErrors('description')}" th:errors="*{description}"></div>
            </div>
<!--            show only on add new form-->
            <div th:if="${book.id == null}">
                <h3>Initial Book Copy</h3>
                <div class="form-field">
                    <label for="simpleId">Simple ID:</label>
                    <input type="text" id="simpleId" name="simpleId" required />

                    <label for="location">Location:</label>
                    <input type="text" id="location" name="location" />

                    <button type="submit" class="button submit">Save Book and First Copy</button>
                </div>
            </div>

            <!-- Right: Book Cover -->
            <div class="book-cover-container">
                <img src="/images/bookcoverholder.png" alt="Book Cover" class="book-cover-image" />
            </div>
        </div>

        <!-- Submit button -->
        <div th:if="${(readonlyMode == null or !readonlyMode) and book.id != null}">
            <button type="submit" class="button submit">Save Book</button>
        </div>
    </form>
</div>






