
<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" th:href="@{/style.css}">

    <title th:text="${student.id != null} ? 'Edit Student' : 'Add Student'">Student</title>

</head>
<body class="teacher">
<header>
    <!-- Logo and Nav -->
    <div th:replace="~{fragments/nav-teacher :: nav}"></div>
</header>



<main>


    <h2 th:text="${student.id != null} ? 'Student Detail' : 'Add Student'">Student</h2>

    <div th:if="${error}" class="error" th:text="${error}"></div>
    <div th:if="${success}" class="success" th:text="${success}"></div>

    <form th:action="${student.id == null} ? @{/teachers/students/add} : @{/teachers/students/edit/{id}(id=${student.id})}"
          th:object="${student}" method="post">

        <div>
            <label for="name">Full Name:</label>
            <input type="text" th:field="*{name}" id="name" required />
            <div class="error" th:if="${#fields.hasErrors('name')}" th:errors="*{name}"></div>
        </div>

        <div>
            <label for="studentId">Student ID:</label>
            <input type="text" th:field="*{studentId}" id="studentId"
                   th:attr="readonly=${student.id != null}" required />
            <div class="error" th:if="${#fields.hasErrors('studentId')}" th:errors="*{studentId}"></div>
        </div>

        <div>
            <label for="pin">PIN:</label>
            <input type="text" th:field="*{pin}" id="pin" required />
            <div class="error" th:if="${#fields.hasErrors('pin')}" th:errors="*{pin}"></div>
        </div>

        <div>
            <label for="readingLevel">Reading Level:</label>
            <input type="number" step="0.1" min="0" max="12" th:field="*{readingLevel}" id="readingLevel" required />
            <div class="error" th:if="${#fields.hasErrors('readingLevel')}" th:errors="*{readingLevel}"></div>
        </div>

        <input type="submit" th:value="${student.id != null} ? 'Update Student' : 'Add Student'" />

        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
    </form>





<!--Delete Button-->
    <div th:if="${student.id != null}">
        <form th:action="@{/teachers/students/delete}" method="post"
              onsubmit="return confirm('Are you sure you want to delete this student?');">
            <input type="hidden" name="id" th:value="${student.id}" />
            <input type="submit" class="button danger" value="Delete Student" />
        </form>

    </div>
<!--    reading history-->

    <div th:replace="~{fragments/student-history-frag :: readingHistory(${checkouts})}"></div>




</main>
<footer>
    <!-- Footer -->
    <div th:replace="~{fragments/footer :: footer}"></div>
</footer>
</body>
</html>